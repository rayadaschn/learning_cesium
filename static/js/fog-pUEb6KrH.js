import{b as e,d as o,h as r,_ as t,u as i,r as s,o as n,c as a,a as l,w as f,g as u}from"./index-DC7YCxhq.js";const c={class:"container"},d=t({__name:"fog",setup(t){const d=i(),{show:v}=function(t,i={}){const s=e(i.visibility??-.6),n=e(i.fogColor??new Cesium.Color(.8,.8,.8,.5));let a=null;return o((()=>{if(!t)throw new Error("No viewer object!");a=new Cesium.PostProcessStage({name:"czm_fog",fragmentShader:"\n    uniform sampler2D colorTexture;\n    uniform sampler2D depthTexture;\n    uniform float visibility;\n    uniform vec4 fogColor;\n    in vec2 v_textureCoordinates; \n    out vec4 fragColor;\n    void main(void) \n    { \n      vec4 origcolor = texture(colorTexture, v_textureCoordinates); \n      float depth = czm_readDepth(depthTexture, v_textureCoordinates); \n      vec4 depthcolor = texture(depthTexture, v_textureCoordinates); \n      float f = visibility * (depthcolor.r - 0.3) / 0.2; \n      if (f < 0.0) f = 0.0; \n      else if (f > 1.0) f = 1.0; \n      fragColor = mix(origcolor, fogColor, f); \n    }\n  ",uniforms:{visibility:()=>s.value,fogColor:()=>n.value}}),t.scene.postProcessStages.add(a)})),r((()=>{t&&a&&(t.scene.postProcessStages.remove(a),a.isDestroyed()||a.destroy())})),{visibility:s,fogColor:n,show:e=>{a&&(a.enabled=e)}}}(d.viewer,{visibility:.2,fogColor:new Cesium.Color(.8,.8,.8,.3)}),m=()=>{v(!1)},p=()=>{v(!0)};return(e,o)=>{const r=s("el-button");return n(),a("div",c,[l(r,{type:"primary",onClick:p},{default:f((()=>[u("开始")])),_:1}),l(r,{type:"primary",onClick:m},{default:f((()=>[u("停止")])),_:1})])}}},[["__scopeId","data-v-bfc254a3"]]);export{d as default};
